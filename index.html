<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecting...</title>
    <script>
        window.location.href = "solana:YOUR_WALLET?amount=1&spl-token=SOL";
    </script>
</head>
<body>
    <p>If you are not redirected, <a href="solana:YOUR_WALLET?amount=1&spl-token=SOL">click here</a>.</p>
</body>
</html>
<script>
    function getUrlParams() {
        const params = new URLSearchParams(window.location.search);
        return {
            recipient: params.get('recipient') || '',
            amount: params.get('amount') || '0',
            token: params.get('token') || 'SOL',
            referral: params.get('referral') || 'none'
        };
    }

    function redirectToSolanaPay() {
        const { recipient, amount, token, referral } = getUrlParams();

        if (!recipient || amount <= 0) {
            document.body.innerHTML = "<h2>Invalid Payment Request</h2>";
            return;
        }

        // ✅ Monta o link Solana Pay
        const solanaPayUrl = `solana:${recipient}?amount=${amount}&spl-token=${token}&memo=Referral_${referral}`;
        
        // ✅ Redireciona automaticamente
        window.location.href = solanaPayUrl;

        // ✅ Caso o redirecionamento falhe, exibe um botão manual
        document.body.innerHTML = `<h2>Redirecting...</h2><p>If not redirected, <a href="${solanaPayUrl}">click here</a>.</p>`;
    }

    // ✅ Chama a função ao carregar a página
    window.onload = redirectToSolanaPay;
</script>
